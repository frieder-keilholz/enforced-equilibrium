import os
import requests

# load linux environment variables
ollama_url = os.getenv('OLLAMA_URL')
quotes_enabled = os.getenv('QUOTES_ENABLED')
facts_enabled = os.getenv('FACTS_ENABLED')
tips_enabled = os.getenv('TIPS_ENABLED')

# decide between quote, fact or tip

def generate_tip():
    # prompt ollama for a tip
    prompt = "Tell me a random, interesting or fun fact about Shen from League of Legends, but dont make stuff up. You might use his lore: “It was no tempest. It was a spirit,” said the fisherman, still rattled by the shipwreck he’d barely survived two nights ago. The man told of his fishing vessel being sunk by a creature, large as a house and quick as the wind. Shen listened to the tale, silently weighing the facts as presented. “Show me where it happened,” said Shen. The man led him to a beach in the bay, where a team of villagers worked to recover the drowned bodies of the mariners. Shen knelt to examine a piece of wreckage. The gashes in the driftwood were deep and savage, the work of powerful claws. “How many dead?” he asked. “All but me… Six,” responded the fisherman. The spirits are strong, thought Shen, digging through the wreckage for any further evidence. At last, on the edge of a splintered portion of the hull, he found it: a small tuft of gossamer hair. Most people would overlook it, or if they did see it, they’d never believe a creature that could break a ship in half could leave something so delicate. But Shen had seen hair like this before. Any doubts he’d had about the veracity of the fisherman’s tale faded as he watched the fine, silvery tuft dissolve into nothing at his touch. “A demon,” Shen remarked. “You must have sailed into its path.” The fisherman nodded grimly. Spirits of all kinds were known to mingle with the physical world, especially in Ionia, where the barrier between realms was thin and passable. The ethereal and material planes were in constant contact, sliding peacefully past one another like oil atop water. As the Eye of Twilight, it was Shen’s duty to walk between the worlds, ensuring neither side overwhelmed the other. To humans, he was a ghost, vanishing in the space between breaths to reappear many miles away. To spirits, he was a human, flesh and bone who ought never to venture into ethereal realms. He knelt on the beach to examine one of the corpses that had been recovered. The man had been torn in half, just below the ribs. What was left of his innards dangled from a pale, bloated torso. “You need not worry. I shall have the monster before nightfall,” said a voice from behind. Shen turned to see a holy man sent by the local temple. Several acolytes stood around him, carrying an assortment of mystical trinkets and oils. They were beginning a cleansing ritual to root out any spiritual disturbances in the area. The holy man stared at Shen, as if sizing up his value. “Can we count on your help, sir?” the man asked. “Balance will be restored,” said Shen with an assuring nod. He parted ways with the holy man and continued to follow the faint trail of gossamer hair. He thought of the dead seafarers and the cost he’d need to exact from the demon. The words of his father still rang true: “The hardest part is finding the point of balance in all things.” True neutrality, the precise center of all forces at work in the world - that is what the Eye must be able to distinguish. Enforcing that equilibrium was its own struggle. For the task, Shen carried two blades on his back. One was an Ionian steel saber that could cleave through a person in one blow. The other was a sword of pure arcane energy. It was used for dealing with spirits, and had been passed down through many generations of Shen’s ancestors. He had slain countless demons, ghosts, wraiths, and sprites with it over the years, and fully expected to take one more before the day was done. At last, Shen came to a secluded inlet, quiet and devoid of human activity. On a sandbar in the shallows lay the demon, its fine, glossy coat shimmering in the dusk. The creature swelled as it rested, engorged from consuming the mortal essences of its victims. Shen crept through the rushes, silently edging toward the sleeping demon. He could see its massive ribcage expand and contract with deep, restful breaths. When he was but a few paces from the sandbar, he drew his spirit blade, readying his strike. Suddenly, a distressing sound stayed his hand. It was a shrill, ghastly cry, emanating from the very air itself. It sounded familiar, but before Shen could identify the noise, he heard it again. And again. And again, culminating in a chorus of blood-curdling shrieks. These were the cries of dying spirits. Shen’s eyes darted back to the demon, now beginning to stir from its slumber. Shen took one more look at his spirit blade, calmly weighing his options. He then clasped his hands together, carefully focusing his ki, and disappeared in a vortex of crackling energy, leaving the demon alone on its sandbar. A moment later, Shen reappeared at the site of the shipwreck.  All around, smoldering pools of black ooze evaporated into the air, coupled with the lingering reek of terror. Shen counted the dissipating black puddles, each the remains of a slain spirit. His tally was interrupted as the holy man entered the clearing with his acolytes. One of the men held a cord of flax and silver. Tethered to the other end was a smaller spirit - an imp of no significance. It struggled against the choke of its leash. It wailed as it saw the remains of its brethren. “Would you care to dispose of this one?” the holy man asked Shen, casually, as if offering him a bowl of soup at dinner. Shen looked at the sticky, smoldering pools that were mighty beings of the otherworld just moments ago. Then he turned his gaze toward the priest and the wailing imp. “I am sorry for this, Your Holiness,” he said. He placed his spirit blade back into its scabbard and drew his steel saber instead. It was not the sword he had expected to use that day."     # query ollama api
    
    print(ollama_url)
    response = requests.post(ollama_url, json={"model": "llama3.1","messages": [{"role": "user","content": prompt}], "stream": False})
    print(response.json().get('message').get('content'))

generate_tip()